{% extends 'base.html'%}
{% block content %}
{% load custom_tags %}
<div class="container">

    <h3>{{topic.title}}</h3>
    <p>{{topic.description}}</p>
    <span>{{topic.author}}</span>
    <span>{{topic.created}}</span>

    <div class="list-group">
   {% for message in topic.messages.all %}

  <a href="" class="list-group-item list-group-item-action " aria-current="true">
      <div class = 'd-flex justify-content-between'><h5>{{message.author}}</h5>
      <span >{{message.created}}</span>
      </div>

      <div>
        <p>{{message.text}}</p>
          {% if message.file %}
        {% if message.file.url|endswith:".png" or message.file.url|endswith:".jng" or message.file.url|endswith:".jpeg" or message.file.url|endswith:".gif" %}
            <img src="{{message.file.url}}" alt="" class="img-fluid" style="max-height: 400px">
        {% else %}
            <a href="{{message.file.url}}" target="_blank">Прикріплений файл</a>
        {% endif %}
      {% endif %}
      </div>

  </a>
    {% endfor %}
    </div>

    <h5>Ваше повідомлення</h5>
    <form action="" method="post" enctype="multipart/form-data">

        {% csrf_token %}
        {{message_form.as_div}}
        <button type="submit" class="btn btn-dark">Додати</button>

    </form>
</div>

{% endblock %}